(*
    Tests for: Daniel`ARC`ARCFindRotationalNormalizationsForScenes2
    
    To run these tests:
    
        << DevTools`
        << Daniel`ARC`
        RunUnitTests[Daniel`ARC`ARCFindRotationalNormalizationsForScenes2]
    
    Author: danielb
*)

Test[
    Daniel`ARC`ARCFindRotationalNormalizationsForScenes2[
        Daniel`ARC`ARCParseInputAndOutputScenes[
            Daniel`ARC`ARCParseFile["56dc2b01"]["Train"]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 8, 0, 3, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 8, 0, 3, 3, 3, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 8, 3, 3, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 8, 0, 3, 3, 3, 2, 0, 0, 0, 0, 0}
                }
            ],
            "RotationNormalization" -> <|
                Daniel`ARC`Object[<|"Area.Rank" -> 1|>] -> <|"X.InverseRank" -> 1|>,
                Daniel`ARC`Object[<|"Color" -> 2|>] -> <|"X.InverseRank" -> 2|>
            |>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 3, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 3, 0, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 3, 3, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 3, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 0, 3, 3, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 3, 3, 0, 2, 0}
                }
            ],
            "NormalizationAngle" -> -90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 3, 0, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 3, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 0, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 3, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 2, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes2-20221113-PM1NXU"
]

Test[
    Daniel`ARC`ARCFindRotationalNormalizationsForScenes2[
        Daniel`ARC`ARCParseInputAndOutputScenes[
            Daniel`ARC`ARCParseFile["b548a754"]["Train"]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 8, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "RotationNormalization" -> <|
                Daniel`ARC`Object[<|"Area.Rank" -> 1|>] -> <|"Y.InverseRank" -> 1|>,
                Daniel`ARC`Object[<|"Shape" -> <|"Name" -> "Pixel"|>|>] -> <|
                    "Y.InverseRank" -> 2
                |>
            |>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 2, 2, 3, 0},
                    {0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 6, 6, 6, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes2-20221113-T38VDO"
]