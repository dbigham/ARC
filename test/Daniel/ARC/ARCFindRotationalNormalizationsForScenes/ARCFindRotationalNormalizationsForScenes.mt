(*
    Tests for: Daniel`ARC`ARCFindRotationalNormalizationsForScenes
    
    To run these tests:
    
        << DevTools`
        << Daniel`ARC`
        RunUnitTests[Daniel`ARC`ARCFindRotationalNormalizationsForScenes]
    
    Author: danielb
*)

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["56dc2b01"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 8, 0, 3, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 8, 0, 3, 3, 3, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 8, 3, 3, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 8, 0, 3, 3, 3, 2, 0, 0, 0, 0, 0}
                }
            ],
            "RotationNormalization" -> <|
                Daniel`ARC`Object[<|"Area.Rank" -> 1|>] -> <|"X.InverseRank" -> 1|>,
                Daniel`ARC`Object[<|"Color" -> 2|>] -> <|"X.InverseRank" -> 2|>
            |>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 3, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0},
                    {0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 3, 0, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 3, 3, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 3, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 0, 3, 3, 2, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 3, 3, 0, 2, 0}
                }
            ],
            "NormalizationAngle" -> 270
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 3, 0, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 3, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 0, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 3, 3, 3, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 2, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221106-P4OTQB"
]

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["0a938d79"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        8,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0,
                        0
                    }
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    },
                    {
                        0,
                        0,
                        0,
                        0,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0,
                        2,
                        0,
                        8,
                        0
                    }
                }
            ],
            "RotationNormalization" -> <|"ObjectsAngle" -> 0|>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0},
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0},
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0},
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0},
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0},
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0},
                    {0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0, 1, 0, 0, 3, 0, 0}
                }
            ],
            "NormalizationAngle" -> 0
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0},
                    {2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 3, 0, 2, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0},
                    {4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-J5BK4V"
]

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["8e1813be"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 5, 5, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 5, 5, 5, 5, 5, 5, 0, 4, 4, 4, 4, 4, 4, 4},
                    {0, 5, 5, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 5, 5, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 5, 5, 5, 5, 5, 5, 0, 8, 8, 8, 8, 8, 8, 8},
                    {0, 5, 5, 5, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {2, 2, 2, 2, 2, 2},
                    {1, 1, 1, 1, 1, 1},
                    {3, 3, 3, 3, 3, 3},
                    {4, 4, 4, 4, 4, 4},
                    {8, 8, 8, 8, 8, 8},
                    {6, 6, 6, 6, 6, 6}
                }
            ],
            "RotationNormalization" -> <|"ObjectsAngle" -> 90|>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 5, 0},
                    {1, 1, 1, 1, 1, 1, 1, 0, 5, 5, 5, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 5, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[{{1, 1, 1}, {2, 2, 2}, {4, 4, 4}}],
            "NormalizationAngle" -> 90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {2, 2, 2, 2, 2, 0, 5, 5, 5, 5, 0, 2},
                    {0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 0, 0},
                    {8, 8, 8, 8, 8, 0, 5, 5, 5, 5, 0, 8},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {{2, 2, 2, 2}, {8, 8, 8, 8}, {4, 4, 4, 4}, {1, 1, 1, 1}}
            ],
            "NormalizationAngle" -> 0
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-5OH86P"
]

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["b7249182"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0},
                    {0, 0, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 2, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 8, 0, 0, 0, 8, 0, 0, 0},
                    {0, 0, 8, 8, 8, 8, 8, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "RotationNormalization" -> <|"ObjectsAngle" -> 90|>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 3, 0, 0, 0, 0, 0, 0},
                    {0, 3, 3, 3, 3, 3, 0, 0, 0, 0},
                    {0, 3, 0, 0, 0, 3, 0, 0, 0, 0},
                    {0, 1, 0, 0, 0, 1, 0, 0, 0, 0},
                    {0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
                    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 5, 5, 5, 5, 5, 0, 0, 0},
                    {0, 0, 5, 0, 0, 0, 5, 0, 0, 0},
                    {0, 0, 8, 0, 0, 0, 8, 0, 0, 0},
                    {0, 0, 8, 8, 8, 8, 8, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 8, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-1P94XB"
]

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["d6ad076f"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {7, 7, 7, 7, 7, 7, 0, 0, 0, 0},
                    {7, 7, 7, 7, 7, 7, 0, 0, 0, 0},
                    {7, 7, 7, 7, 7, 7, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0},
                    {0, 2, 2, 2, 2, 0, 0, 0, 0, 0},
                    {0, 0, 8, 8, 0, 0, 0, 0, 0, 0},
                    {0, 0, 8, 8, 0, 0, 0, 0, 0, 0},
                    {0, 0, 8, 8, 0, 0, 0, 0, 0, 0},
                    {7, 7, 7, 7, 7, 7, 0, 0, 0, 0},
                    {7, 7, 7, 7, 7, 7, 0, 0, 0, 0},
                    {7, 7, 7, 7, 7, 7, 0, 0, 0, 0}
                }
            ],
            "RotationNormalization" -> <|"ObjectsAngle" -> 90|>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 4, 4, 4, 4, 4, 4, 4, 4, 0},
                    {0, 4, 4, 4, 4, 4, 4, 4, 4, 0},
                    {0, 4, 4, 4, 4, 4, 4, 4, 4, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 6, 6, 6, 6, 6, 0, 0, 0},
                    {0, 0, 6, 6, 6, 6, 6, 0, 0, 0},
                    {0, 0, 6, 6, 6, 6, 6, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 4, 4, 4, 4, 4, 4, 4, 4, 0},
                    {0, 4, 4, 4, 4, 4, 4, 4, 4, 0},
                    {0, 4, 4, 4, 4, 4, 4, 4, 4, 0},
                    {0, 0, 0, 8, 8, 8, 0, 0, 0, 0},
                    {0, 0, 0, 8, 8, 8, 0, 0, 0, 0},
                    {0, 0, 0, 8, 8, 8, 0, 0, 0, 0},
                    {0, 0, 6, 6, 6, 6, 6, 0, 0, 0},
                    {0, 0, 6, 6, 6, 6, 6, 0, 0, 0},
                    {0, 0, 6, 6, 6, 6, 6, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 0},
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 0},
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 9, 9, 9, 9, 9, 9, 0},
                    {0, 0, 0, 9, 9, 9, 9, 9, 9, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 0},
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 0},
                    {3, 3, 3, 3, 3, 3, 3, 3, 3, 0},
                    {0, 0, 0, 0, 8, 8, 8, 8, 0, 0},
                    {0, 0, 0, 0, 8, 8, 8, 8, 0, 0},
                    {0, 0, 0, 0, 8, 8, 8, 8, 0, 0},
                    {0, 0, 0, 0, 8, 8, 8, 8, 0, 0},
                    {0, 0, 0, 0, 8, 8, 8, 8, 0, 0},
                    {0, 0, 0, 9, 9, 9, 9, 9, 9, 0},
                    {0, 0, 0, 9, 9, 9, 9, 9, 9, 0}
                }
            ],
            "NormalizationAngle" -> 0
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-0R5EI9"
]

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["f8a8fe49"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    {
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 0, 5, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 0, 5, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "RotationNormalization" -> <|"ObjectsAngle" -> 90|>
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 5, 5, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 5, 5, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 0, 0, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 5, 5, 5, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>,
        <|
            "Input" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "Output" -> Daniel`ARC`ARCScene[
                {
                    {0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 5, 5, 5, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
                }
            ],
            "NormalizationAngle" -> 90
        |>
    }
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-VJ79VE"
]

Test[
    Utility`ReplaceAssociationsWithUnevaluatedAssociations[
        DevTools`TestingTools`SlowTest[
            Module[
                {parsedExamples},
                parsedExamples = Utility`ReturnIfFailure[
                    Daniel`ARC`ARCParseInputAndOutputScenes[
                        Daniel`ARC`ARCParseFile["97999447"]["Train"]
                    ]
                ];
                Utility`ReturnIfFailure[
                    Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
                ]
            ]
        ]
    ]
    ,
    Missing["NotFound"]
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-651VWY"
]

Test[
    Module[
        {parsedExamples},
        parsedExamples = Utility`ReturnIfFailure[
            Daniel`ARC`ARCParseInputAndOutputScenes[
                Daniel`ARC`ARCParseFile["3a301edc"]["Train"]
            ]
        ];
        Utility`ReturnIfFailure[
            Daniel`ARC`ARCFindRotationalNormalizationsForScenes[parsedExamples]
        ]
    ]
    ,
    Missing["NotFound"]
    ,
    TestID -> "ARCFindRotationalNormalizationsForScenes-20221108-8L7QT5"
]